<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>jVectorMap demo</title>
  <link rel="stylesheet" href="assets/css/jquery-jvectormap-2.0.3.css" type="text/css" media="screen"/>
  <script src="assets/js/jquery-1.12.3.min.js"></script>
  <script src="assets/js/jquery-jvectormap-2.0.3-min.js"></script>
  <script src="assets/js/jquery-jvectormap-world-mill-en-min.js"></script>
  <script src="assets/js/markers-min.js"></script>
  <script src="assets/data/mortality-data-min.js"></script>
  <script src="assets/data/physician-data-min.js"></script>
  <script src="assets/data/gdp-data-min.js"></script>
  <script src="dev/js/process.js"></script>
  <!-- <script src="gdp-data.js"></script> -->

  <link rel="stylesheet" href="assets/css/custom-styles.css" media="screen" title="no title" charset="utf-8">
</head>
<body>
  <div class="map-container">

    <div id="world-map-gdp" ></div>
    <div id="customTip" class="jvectormap-tip"></div>
  </div>
  <!-- <div class="map-container">
    <div id="physician-map"></div>
  </div> -->
<script>




$(function(){
  var scope = {};
  scope.bgColor = 'transparant';
  scope.scaleColors = ['#fbf0f1','#cb333b'];
  scope.fillColor = '#e7e7e9';
  scope.strokeColor = '#fff';
  scope.strokeWidth = '0.4';
  scope.markerColor = '#21ACDE'

  $('#world-map-gdp').vectorMap({
    map: 'world_mill_en',
    backgroundColor: scope.bgColor,
    zoomOnScroll: false,
    regionStyle: {
      initial: {
        fill: scope.fillColor,
        stroke: scope.strokeColor,
        "stroke-width": scope.strokeWidth
      }
    },
    markers: markers,
    markerStyle: {
      initial: {
        r: 8,
        fill: scope.markerColor,
        stroke: scope.strokeColor
        // image: 'marker4.png'
      },
    },
    series: {
      regions: [{
        values: mortalityData,
        scale: scope.scaleColors,
        normalizeFunction: 'polynomial'
      }]
      // markers: [{
      //   attribute: fill,
      //
      // }]
    },
    onRegionTipShow: function(e, label, index){
      label.html(label.html()+'<br> (Rate - '+mortalityResult[index]+')');
    },
    onMarkerTipShow: function(event, tip, index){
      tip.html('<div class="info-window"><h3>'+tip.html()+'</h3>'+'<p>'+markers[index].content+'</p>'+'<a href="'+markers[index].link+'" target="_blank">Where we work <span>&#62;&#62;</span></a></div>');
      event.preventDefault();
    },
    onMarkerOver: function(event, tip, code){
      // console.log('You have triggered mouseover');


    },
    onMarkerClick: function(event, tip, code ) {
      console.log('You have triggered click');
      var map = $('#world-map-gdp').vectorMap('get', 'mapObject');
      var customTip = $('#customTip');

      customTip.css({
                left: left,
                top: top
              })

      customTip.html(map.tip.html());
      customTip.prepend("<button>&#215;</button>");
      customTip.children("button").click(function(){
                 customTip.hide();
               })

         // customTip.html('<h3>'+tip.html()+'</h3>'+'<p>'+markers[index].content+'</p>'+'<a href="'+markers[index].link+'">Where we work >></a>')
      customTip.show();
    }
});
var left,top;
$('#world-map-gdp').vectorMap('get', 'mapObject').container.mousemove(function(e){
  left = e.pageX - 320;
  top = e.pageY - 220;

});//end vectorMap

});// end function


// physicians map
$(function(){
  var scope = {};
  scope.bgColor = '#fff';
  scope.scaleColors = ['#fbf0f1','#cb333b'];
  scope.fillColor = '#e7e7e9';
  scope.strokeColor = '#fff';
  scope.strokeWidth = '0.4';
  scope.markerColor = 'aqua'

  $('#physician-map').vectorMap({
    map: 'world_mill_en',
    backgroundColor: scope.bgColor,
    zoomOnScroll: false,
    regionStyle: {
      initial: {
        fill: scope.fillColor,
        stroke: scope.strokeColor,
        "stroke-width": scope.strokeWidth
      }
    },
    markers: markers,
    markerStyle: {
            initial: {
              fill: scope.markerColor,
              stroke: scope.strokeColor
            }
          },
    series: {
      regions: [{
        values: gdpData,
        scale: scope.scaleColors,
        normalizeFunction: 'polynomial'
      }]
    },
    onRegionTipShow: function(e, label, index){
      label.html(label.html()+'<br> (GDP - '+physicianResult[index]+')');
    },
    onMarkerTipShow: function(event, label, index){
      label.html('<h3>'+label.html()+'</h3>'+'<p>'+markers[index].content+'</p>'+'<a href="'+markers[index].link+'">Where we work >></a>');
    }
  });
});






</script>
  </div>
</body>
</html>
