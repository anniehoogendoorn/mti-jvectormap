function processData(t,o){var n,e;$.when($.getJSON(t,function(t){n=t}),$.getJSON("mti-country-codes.json",function(t){e=t})).done(function(){for(var t=0;t<n.length;t++){var c=n[t].country,s=n[t].stat;$.each(e,function(t,n){c===n&&(o[t]=s)})}return o})}var mortalityResult={},physicianResult={};processData("mortality.json",mortalityResult),console.log(mortalityResult),processData("physician.json",physicianResult),$("circle.jvectormap-marker.jvectormap-element").click(function(){console.log("this works")});